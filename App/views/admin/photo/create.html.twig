{% extends view('admin.admin') %}


{% block content %}

    <link rel="stylesheet" href="../../../../assets/admin/upload/css/jquery.fileupload.css">

            <div class="panel panel-default">
                <div class="panel-heading"></a> Nova Foto</div>
                <div class="panel-body">

                    <form method="post" action="" class="form-horizontal" id="from_upload">
                        <input type="hidden" name="gallery_id"  id="gallery_id" value="{{ id }}"/>

                        <div class="form-group command_show">
                            <label class="col-sm-2 control-label">Titulo</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control" name="title" id="title" />
                            </div>
                        </div>
                        <div class="form-group command_show">
                            <label class="col-sm-2 control-label">Descrição</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control" name="description" id="description"/>
                            </div>
                        </div>
                        <div class="form-group command_show">
                            <label class="col-sm-2 control-label">Requisitos</label>
                            <div class="col-sm-6">
                                <p>Arquivo Suportados: .PNG .JPG</p>
                                <p>Tamanhos Maxi: 3M</p>
                            </div>
                        </div>


                    <div style="margin-bottom: 50px">
                        <span class="btn btn-success fileinput-button">
                            <i class="glyphicon glyphicon-plus"></i>
                            <span>Arquivos</span>
                            <input id="fileupload" type="file" name="file"  multiple>
                        </span>
                    </div>

                    <!-- The global progress bar -->
                    <div id="progress" class="progress">
                        <div class="progress-bar progress-bar-success"></div>
                    </div>
                    <!-- The container for the uploaded files -->
                    <div id="files" class="files"></div>
                    <br/>
                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-10">
                                <button type="submit" class="btn btn-default" id="upload"><i class="fa fa-btn fa-check"></i>Salvar</button>
                            </div>
                        </div>
                    </form>

                </div>
            </div>

    <script src="../../../../assets/admin/upload/js/jquery.ui.widget.js"></script>
    <script src="../../../../assets/admin/upload/js/jquery.fileupload.js"></script>

    <script>

        $(function () {
            'use strict';

            var url = '/admin/photo/upload';

            $('#fileupload').fileupload({
                url: url,
                dataType: 'json',
                autoUpload: false,
                add : function(e, data){
                    $("#upload").click(function(){
                        data.formData = $('#from_upload').serializeArray();
                        data.submit();
                    });
                },

                done: function (e, data) {

                    console.log(data.result);
                    $('<p/>').text(data.result).appendTo('#files');
                },

                progressall: function (e, data) {
                    var progress = parseInt(data.loaded / data.total * 100, 10);
                    $('#progress .progress-bar').css(
                            'width',
                            progress + '%'
                    );
                }
            }).prop('disabled', !$.support.fileInput)
                    .parent().addClass($.support.fileInput ? undefined : 'disabled');
        });
    </script>
{% endblock %}